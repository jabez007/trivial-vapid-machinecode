(function(t){function e(e){for(var a,i,l=e[0],s=e[1],c=e[2],d=0,u=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);h&&h(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],a=!0,l=1;l<o.length;l++){var s=o[l];0!==r[s]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=o[0]))}return t}var a={},r={app:0},n=[];function i(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=a,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/trivial-vapid-machinecode/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var h=s;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"15e6":function(t,e,o){"use strict";o("f6fe")},"56d7":function(t,e,o){"use strict";o.r(e);var a=o("2b0e"),r=function(){var t=this,e=t._self._c;return e("div",[e("loading",{attrs:{active:t.loading.length>0,"is-full-page":!0},on:{"update:active":function(e){return t.$set(t.loading,"length > 0",e)}}}),e("trading-vue",{ref:"tradingVue",attrs:{width:t.width,height:t.height,titleTxt:t.title[t.ticker],data:this[t.ticker],colorCandleUp:"#f6f6f6",colorWickUp:"#f6f6f6",colorVolUp:"#f6f6f6",colorCandleDw:"#808080",colorWickDw:"#808080",colorVolDw:"#808080",overlays:t.overlays}}),e("span",{staticClass:"ticker-select"},[e("label",[t._v("Trading Vue")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.ticker,expression:"ticker"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ticker=e.target.multiple?o:o[0]}}},[e("option",[t._v("gold")]),e("option",[t._v("silver")]),e("option",[t._v("ratio")])])])],1)},n=[],i=o("18fa"),l=o.n(i),s=o("0042"),c=o("b704"),h=o.n(c),d=(o("14d9"),o("13d5"),o("cee4"));const u=[{symbol:"SGOL",data:"gold"},{symbol:"SIVR",data:"silver"}];function f(t){const e=t["Time Series (Daily)"],o=Object.keys(e).map(t=>{const o=Number.parseFloat(e[t]["5. adjusted close"])/Number.parseFloat(e[t]["4. close"])||1;return[Date.parse(t),Number.parseFloat(e[t]["1. open"])*o,Number.parseFloat(e[t]["2. high"])*o,Number.parseFloat(e[t]["3. low"])*o,Number.parseFloat(e[t]["4. close"])*o,Number.parseInt(e[t]["6. volume"]||e[t]["5. volume"])/o]});return o.sort((t,e)=>t[0]-e[0]),o}function g(t,e){if(e>t.length||e<1)return[];let o=[];for(let a=e;a<=t.length;a++)o.push([t[a-1][0],t.slice(a-e,a).map(t=>t.slice(2,5).reduce((t,e)=>t+e)/3).reduce((t,e)=>t+e)/e]);return o}function p(t,e){if(e>t.length||e<1)return[];const o=2/(e+1);let a=[[t[e-1][0],t.slice(0,e).map(t=>t.slice(2,5).reduce((t,e)=>t+e)/3).reduce((t,e)=>t+e)/e]];for(let r=e;r<t.length;r++){const e=t[r].slice(2,5).reduce((t,e)=>t+e)/3,n=a[a.length-1][1];a.push([t[r][0],e*o+n*(1-o)])}return a}function m(t,e,o,a){if(e>o)return[];const r=p(t,e),n=p(t,o),i=n.map((t,a)=>{const n=r[a+(o-e)];return[t[0],n[1]-t[1]]}),l=2/(a+1);let s=[[i[a-1][0],i.slice(0,a).map(t=>t[1]).reduce((t,e)=>t+e)/a]];for(let c=a;c<i.length;c++)s.push([i[c][0],i[c][1]*l+s[s.length-1][1]*(1-l)]);return s.map((t,e)=>{const o=i[e+(a-1)];return[t[0],o[1]-t[1],o[1],t[1]]})}function _(t,e=14){if(e>t.length||e<1)return[];function o(t){let e=0;for(let r=1;r<t.length;r++)e+=Math.max(0,t[r]-t[r-1]);e/=t.length;let o=0;for(let r=1;r<t.length;r++)o+=Math.max(0,t[r-1]-t[r]);o/=t.length;const a=100-100/(1+e/o);return a}let a=[];for(let r=e;r<=t.length;r++)a.push([t[r-1][0],o(t.slice(r-e,r).map(t=>t.slice(2,5).reduce((t,e)=>t+e)/3))]);return a}var v={data:()=>({loading:[],gold_ohlcv:[],gold_onchart:[],gold_offchart:[],silver_ohlcv:[],silver_onchart:[],silver_offchart:[]}),created(){const t=this;u.forEach(e=>{t.loading.push(!0),d["a"].get(`data/${e.symbol}.json`,{baseURL:window.location.href}).then(o=>{t[e.data+"_ohlcv"]=f(o.data),t[e.data+"_onchart"]=[...t[e.data+"_onchart"],{name:"SMA, 9",type:"SMA",data:g(t[e.data+"_ohlcv"],9),settings:{lineWidth:1}},{name:"EMA, 20",type:"EMA",data:p(t[e.data+"_ohlcv"],20),settings:{lineWidth:2}},{name:"EMA, 50",type:"EMA",data:p(t[e.data+"_ohlcv"],50),settings:{lineWidth:3}},{name:"SMA, 200",type:"SMA",data:g(t[e.data+"_ohlcv"],200),settings:{lineWidth:5,color:"#bbbbbb"}},{name:"TD 9 Count Up",type:"Markers",data:t[e.data+"_ohlcv"].reduce((o,a,r)=>[...o,[a[0],{color:"#35a73d",textColor:"#eaf6eb",$:a[2],text:o.length>4&&a[4]>t[e.data+"_ohlcv"][r-4][4]?o[o.length-1][1].text+1:0,sel:o.length>4&&8===o[o.length-1][1].text}]],[]).filter(t=>t[1].text>=7),settings:{legend:!1}},{name:"TD 9 Count Down",type:"Markers",data:t[e.data+"_ohlcv"].reduce((o,a,r)=>[...o,[a[0],{color:"#e541a2",textColor:"#fcecf5",$:a[2],text:o.length>4&&a[4]<t[e.data+"_ohlcv"][r-4][4]?o[o.length-1][1].text+1:0,sel:o.length>4&&8===o[o.length-1][1].text}]],[]).filter(t=>t[1].text>=7),settings:{legend:!1}}],t[e.data+"_offchart"]=[{name:"MACD (13, 22, 9)",type:"MACD",data:m(t[e.data+"_ohlcv"],13,22,9),settings:{signalWidth:3}},{name:"RSI, 14",type:"RSI",data:_(t[e.data+"_ohlcv"],14),settings:{upper:70,lower:30,backColor:"#00b30021"}},...t[e.data+"_offchart"]],t.loading.pop()})})}},b={computed:{ratio_ohlcv(){const t=this,e=this.silver_ohlcv.map((e,o)=>{let a=t.gold_ohlcv[o-32]||[];if(e[0]==a[0]){let t=a[4]>100?10:100;return[e[0],a[1]*t/e[1],a[2]*t/e[2],a[3]*t/e[3],a[4]*t/e[4],a[5]+e[5]]}return[]}).filter(t=>t.length>0);return e},ratio_sma200(){const t=this;return g(t.ratio_ohlcv,200)},ratio_ema50(){const t=this;return p(t.ratio_ohlcv,50)},ratio_ema20(){const t=this;return p(t.ratio_ohlcv,20)},ratio_sma9(){const t=this;return g(t.ratio_ohlcv,9)},ratio(){const t=this;return{ohlcv:t.ratio_ohlcv,onchart:[{name:"SMA, 9",type:"SMA",data:t.ratio_sma9,settings:{lineWidth:1}},{name:"EMA, 20",type:"EMA",data:t.ratio_ema20,settings:{lineWidth:2}},{name:"EMA, 50",type:"EMA",data:t.ratio_ema50,settings:{lineWidth:3}},{name:"SMA, 200",type:"SMA",data:t.ratio_sma200,settings:{lineWidth:5}},{name:"Data sections",type:"Splitters",data:[[t.ratio_ohlcv[t.ratio_ohlcv.length-1][0],t.ratio_ema50[t.ratio_ema50.length-1][1]>t.ratio_sma200[t.ratio_sma200.length-1][1]&&t.ratio_ema50[t.ratio_ema50.length-2][1]<t.ratio_ema50[t.ratio_ema50.length-1][1]&&t.ratio_ohlcv[t.ratio_ohlcv.length-1][4]>t.ratio_sma200[t.ratio_sma200.length-1][1]?"Focus on Silver":t.ratio_ema50[t.ratio_ema50.length-1][1]<t.ratio_sma200[t.ratio_sma200.length-1][1]&&t.ratio_ema50[t.ratio_ema50.length-2][1]>t.ratio_ema50[t.ratio_ema50.length-1][1]&&t.ratio_ohlcv[t.ratio_ohlcv.length-1][4]<t.ratio_sma200[t.ratio_sma200.length-1][1]?"Focus on Gold":"HODL",1,"#5700ff",.5]],settings:{legend:!1,lineColor:"#ffd700"}}],offchart:[{name:"MACD (13, 22, 9)",type:"MACD",data:m(t.ratio_ohlcv,13,22,9),settings:{signalWidth:3}},{name:"RSI, 14",type:"RSI",data:_(t.ratio_ohlcv,14),settings:{upper:70,lower:30,backColor:"#00b30021"}}]}}}},y=(o("71b4"),{computed:{ready(){const t=this;return 0===t.loading.length}},watch:{ready(t){const e=this;t&&u.forEach(t=>{const o=e[t.data+"_ohlcv"],a=e[t.data+"_onchart"].find(t=>"EMA, 20"===t.name).data,r=o.length-a.length,n=e[t.data+"_onchart"].find(t=>"SMA, 9"===t.name).data,i=o.length-n.length,l=e[t.data+"_offchart"].find(t=>"MACD"===t.type).data,s=o.length-l.length,c=e[t.data+"_offchart"].find(t=>"RSI"===t.type).data,h=o.length-c.length;function d(t,e,d){const u=e.slice(2,5).reduce((t,e)=>t+e)/3,f=t.findLastIndex(t=>"BUY"===t[1])||0,g=(o[f]||[0,0,0,0,0,0]).slice(2,5).reduce((t,e)=>t+e)/3,p=t.findLastIndex(t=>t[1].startsWith("SELL"))||0;return p>=f&&Math.min(e[1],e[4])>(n[d-i]||[0,0])[1]&&(l[d-s]||[0,0,0,0])[1]>=.001&&(l[d-s-1]||[0,0,0,0])[1]<(l[d-s]||[0,0,0,0])[1]&&(c[d-h]||[0,0])[1]>40&&Math.min(...c.slice(Math.max(0,d-h-3),d-h).map(t=>t[1]))<40?"BUY":f>p&&(Math.max(e[1],e[4])<(n[d-i]||[0,0])[1]||e[4]-e[1]<=-.01&&e[4]-(a[d-r]||[0,0])[1]<=-.01||e[4]-Math.min(...o.slice(Math.max(0,d-3),d).map(t=>t[3]))<=-.01||(l[d-s]||[0,0,0,0])[1]<=-.001&&(l[d-s-1]||[0,0,0,0])[1]>(l[d-s]||[0,0,0,0])[1])?`SELL ${((u-g)/g*100).toFixed(2)}%`:""}const u=o.reduce((t,e)=>{const o=t.length,a=d(t,e,o);return[...t,[e[0],a,1,a.startsWith("SELL")?a.includes("-")?"#8b0000":"#008b00":"#5700ff","BUY"===a?.2:a.startsWith("SELL")?.8:.5]]},[]).filter(t=>""!==t[1]);e[t.data+"_onchart"]=[...e[t.data+"_onchart"],{name:"Buy/Sell Signals",type:"Splitters",data:u,settings:{legend:!1,lineColor:"#ffd700"}}];const f=u.filter(t=>t[1].startsWith("SELL")).map(t=>Number.parseFloat(t[1].replace(/SELL\s/,"").replace(/%/,"")));console.log(`Trade outcomes for ${t.symbol}: ${f}`),console.log(`Number of trades for ${t.symbol}: ${f.length}`),console.log(`Percent of profitable trades for ${t.symbol}: `+(f.filter(t=>t>0).length/f.length*100).toFixed(2)+"%"),console.log(`Average trade for ${t.symbol}: `+(f.reduce((t,e)=>t+e)/f.length).toFixed(2)+"%"),console.log(`Largest loosing trade for ${t.symbol}: ${Math.min(...f)}%`);const g=1e3;console.log(`Starting with $${g} on ${new Date(o[0][0]).toLocaleDateString()}, ending balance for ${t.symbol}: $`+f.reduce((t,e)=>t*(1+e/100),g).toFixed(2))})}}});function M(t,e){return t[1]>0?t[1]>(e[1]||0)?0:1:t[1]<(e[1]||0)?2:3}var w,S,x={name:"MACD",mixins:[s["Overlay"]],methods:{meta_info(){return{author:"StdSquad",version:"1.0.2",desc:"Moving Average Convergence/Divergence",preset:{name:"MACD $fast $slow $smooth",side:"offchart",settings:{histWidth:4,macdWidth:1,signalWidth:1,defColor:"#42b28a",macdColor:"#3782f2",signalColor:"#f48709",histColors:["#35a776","#79e0b3","#e54150","#ea969e"]}}}},draw(t){const e=this.$props.layout,o=e.$2screen(0)+.5;t.beginPath();for(var a=0;a<this.$props.data.length;a++){let r=this.$props.data[a],n=this.$props.data[a-1]||[],i=e.t2screen(r[0])+1,l=Math.floor(i-.5*e.px_step),s=Math.floor(i+.5*e.px_step)-.5,c=e.$2screen(r[1])-.5;t.strokeStyle=this.hist_colors[M(r,n)],t.lineWidth=s-l,t.beginPath(),t.moveTo(i,o),t.lineTo(i,c),t.stroke()}for(var r of(t.beginPath(),t.lineWidth=this.macd_width,t.strokeStyle=this.macd_color,this.$props.data)){let o=e.t2screen(r[0]),a=e.$2screen(r[2]);t.lineTo(o,a)}for(var n of(t.stroke(),t.beginPath(),t.lineWidth=this.signal_width,t.strokeStyle=this.signal_color,this.$props.data)){let o=e.t2screen(n[0]),a=e.$2screen(n[3]);t.lineTo(o,a)}t.stroke()},use_for(){return["MACD"]},legend(t){let e=t.slice(1,4).map(t=>t.toFixed(Math.abs(t)>.001?4:8));return[{value:e[0],color:this.hist_colors[t[1]>0?0:2]},{value:e[1],color:this.macd_color},{value:e[2],color:this.signal_color}]},calc(){return{props:{fast:{def:12,text:"Fast Length"},slow:{def:26,text:"Slow Length"},smooth:{def:9,text:"Signal EMA"}},update:"\n                    let [macd, signal, hist] =\n                        macd(close, fast, slow, smooth)\n\n                    if (hist[0] >= 0) {\n                         var color = 0\n                         if (hist[0] < hist[1]) color = 1\n                    } else {\n                        color = 2\n                        if (hist[0] > hist[1]) color = 3\n                    }\n\n                    return [hist[0], macd[0], signal[0], color]\n                "}}},computed:{sett(){return this.$props.settings},hist_width(){return this.sett.histWidth||4},macd_width(){return this.sett.macdWidth||1},signal_width(){return this.sett.signalWidth||1},color(){return this.sett.defColor||"#42b28a"},macd_color(){return this.sett.macdColor||"#3782f2"},signal_color(){return this.sett.signalColor||"#f48709"},hist_colors(){return this.sett.histColors||["#35a776","#79e0b3","#e54150","#ea969e"]}}},$=x,A=o("2877"),C=Object(A["a"])($,w,S,!1,null,null,null),L=C.exports,W=(o("e40d"),{mixins:[v,b,y],components:{Loading:l.a,TradingVue:s["TradingVue"]},data:()=>({ticker:"ratio",title:{gold:"SGOL",silver:"SIVR",ratio:"SGOL / SIVR"},width:0,height:0,overlays:[h.a["Markers"],L]}),computed:{gold(){const t=this;return{ohlcv:t.gold_ohlcv,onchart:t.gold_onchart,offchart:t.gold_offchart}},silver(){const t=this;return{ohlcv:t.silver_ohlcv,onchart:t.silver_onchart,offchart:t.silver_offchart}}},mounted(){this.onResize(),window.addEventListener("resize",this.onResize)},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.width=window.innerWidth,this.height=window.innerHeight}}}),k=W,D=(o("15e6"),Object(A["a"])(k,r,n,!1,null,null,null)),E=D.exports;a["a"].config.productionTip=!1,new a["a"]({render:t=>t(E)}).$mount("#app")},f6fe:function(t,e,o){}});
//# sourceMappingURL=app.d912bd71.js.map